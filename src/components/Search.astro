---
import SearchIcon from "./icons/SearchIcon.astro";
---

<form id="form-search" class="w-full mx-auto">
  <label
    for="default-search"
    class="mb-2 text-sm font-medium text-zinc-900 sr-only dark:text-white"
  >
    Search
  </label>
  <div class="relative">
    <div
      class="absolute inset-y-0 start-0 flex items-center ps-3 pointer-events-none"
    >
      <SearchIcon class="w-4 h-4" />
    </div>
    <input
      type="search"
      id="default-search"
      class="block w-full p-4 ps-10 text-sm text-zinc-900 border border-zinc-300 rounded-lg bg-zinc-50 focus:ring-pink-500 focus:border-pink-500 dark:bg-zinc-700 dark:border-zinc-600 dark:placeholder-zinc-400 dark:text-white dark:focus:ring-pink-500 dark:focus:border-pink-500"
      placeholder="Cari Anime..."
      required
    />
    <button
      type="submit"
      class="text-white absolute end-2.5 bottom-2.5 bg-pink-700 hover:bg-pink-800 focus:ring-4 focus:outline-none focus:ring-pink-300 font-medium rounded-lg text-sm px-4 py-2 dark:bg-pink-600 dark:hover:bg-pink-700 dark:focus:ring-pink-800"
    >
      Search
    </button>
  </div>
</form>

<script>
  // LOGIKA PENCARIAN
  const searchFormEl = document.getElementById("form-search");

  if (searchFormEl) {
    searchFormEl.addEventListener("submit", function (e) {
      e.preventDefault();

      const inputEl = this.querySelector("input");

      location.href = `/search?q=${inputEl?.value}`;
    });
  }
</script>